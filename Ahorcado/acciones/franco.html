<!DOCTYPE html>
<html lang="es">
<head>
    <title>W3.CSS</title>
    <meta charset="UTF8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../estilo/index.css">
   
    <script src="../js/index.js"></script>
    </head>
		<body>
			<header>
                <!--background del header-->
                
                	<a href="index.html">                   
                        <!--logo de engranaje con petroleo-->
                      <!--  <img id="logo" src="logo/logo.png"></img>
                        <!--Imagen de metalfer-->
                        <img id="frases" src="../logo/ahorcado.png"></img>
                	</a>
        			<!-- Page Content -->
						<div class="w3-overlay w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" id="myOverlay"></div>
  							<img class="w3-button w3-white w3-xxlarge" id="hamburguesa" src="../logo/menu.png" onclick="w3_open()">
                    <!-- Sidebar -->
                    	<div class="w3-sidebar w3-bar-block w3-animate-left" style="display:none;z-index:5" id="mySidebar">
                        <img id="alexis-sidebar" src="../logo/LOGOg.png"></img>
                   
                        	<div class="scroll" id="scroll-sidebar">
                      		  <button class="w3-bar-item w3-buttn w3-large" onclick="w3_close()">CERRAR X</button>
                              

	
							 <a href="#" onClick="frases_oculta('frases_a_mostrar')" title="" class="w3-bar-item w3-buttn Frases" >Frases Metalfer &#43;</a>

<div id="frases_a_mostrar">
                              <a href="acciones/freases famosas/Alexis.htm" class="w3-bar-item w3-buttn">Alexis Rodríguez</a>
                              <a href="acciones/freases famosas/Nestor.html" class="w3-bar-item w3-buttn">Néstor Bartoletti</a>
                              <a href="acciones/freases famosas/Raul.html" class="w3-bar-item w3-buttn">Raúl Orozco</a>
                              <a href="acciones/freases famosas/Carpentieri.html" class="w3-bar-item w3-buttn">Eduardo Carpentieri</a>
                              <a href="acciones/freases famosas/Gonzalez.html" class="w3-bar-item w3-buttn">Eduardo Gonzalez</a>
                              <a href="omar.html" class="w3-bar-item w3-buttn">Omar Acuña</a>
                              <a href="#" class="w3-bar-item w3-buttn">Dario Acuña</a>
                              <a href="acciones/freases famosas/Horacio.html" class="w3-bar-item w3-buttn">Horacio Alvarez</a>
                              <a href="matias.html" class="w3-bar-item w3-buttn">Matias Brito</a>
                              <a href="acciones/freases famosas/Laura.html" class="w3-bar-item w3-buttn">Laura</a>
                              <a href="#" class="w3-bar-item w3-buttn">Hernan</a>
                              <a href="acciones/freases famosas/Juan.html" class="w3-bar-item w3-buttn">Juan</a>
                              <a href="acciones/freases famosas/Francisco.html" class="w3-bar-item w3-buttn">Francisco Lugo</a>
                              
                   	</div>	
                        <!-- redes sociales -->
					<div id="social">
                	
					<a  href="#">
                    	<img class="facebook" onClick="face" src="../backround/f.png"></img>
                        </a>
				<a href="#">
                    	<img  class="linkedin"  src="../backround/in.png"></img>
                        </a>
                <a href="#">
                    	<img  class="twitter" src= "../backround/t.png"></img>
                        </a>
					
				

			<div class="copyright">Copyright © All Rights Reserved.</div>
		</div>
		<!--Fin redes sociales -->
	</div>
                        </div>
                        </div>
			</header>
	<link type="text/css" href="../jquery-ui-1.8.1.custom.css" rel="Stylesheet">      
	<script type="text/javascript"  src="../jquery-1.4.2.min.js.descarga"></script>
	<script type="text/javascript" src="../jquery-ui-1.8.1.custom.min.js.descarga"></script> 
<script>

function aleatorio(inferior,superior){
    numPosibilidades = superior - inferior + 1
    aleat = Math.random() * numPosibilidades
    aleat = Math.floor(aleat)
    return parseInt(inferior) + aleat
}

function esta(caracter, miarray){
  //console.log("buscando ", caracter, " en ", miarray)
  for(var j=0;j<miarray.length;j++){
    if (caracter==miarray[j]){
		return true;
    }else{
		//console.log("el caracter ", caracter, " no es el valor del array ",miarray[j] )
	}
  }
  return false;
}

function estanTodas(arrayAciertos, mipalabra){
	for(var i=0; i<mipalabra.length; i++){
		if(!esta(mipalabra.charAt(i),arrayAciertos))
			return false;
	}
	return true;
}

////////////////////////////////////////////////////////////////////////////////
// PALABRAS
////////////////////////////////////////////////////////////////////////////////
var palabras = ['ahorcado', 'lavadora', 'invierno', 'plastico', 'ordenador', 'colador', 'guantera', 'alimentador', 'calculos'];
var palabraEscogida = palabras[aleatorio(0,palabras.length-1)]
var aciertos = [];

//console.log(palabraEscogida);

function escribePalabra(palabra, arrayAciertos){
	//console.log("estoy en escribePalabra y arrat de aciertos es: " , arrayAciertos);
	var texto = '';
	for(var i=0; i<palabra.length; i++){
		texto += "<span>";
		var cActual = palabra.charAt(i);
		if(esta(cActual,arrayAciertos)){
			texto += cActual;
		}else{
			texto += '_';
		}
		texto += "</span>";
		//console.log(cActual)
	}
	$("#letras").html(texto);
}



////////////////////////////////////////////////////////////////////////////////
//// inicio todo!!!
////////////////////////////////////////////////////////////////////////////////
$(document).ready(function(){
	
	//creo los botones con las letras
	var letras = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'Ñ', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];
	for(i=0; i<letras.length; i++){
		//creo el span de la letra
		letraActual = $('<button class="botonletra">' + letras[i] + '</button>');
		letraActual.data("letra",letras[i]);
		//lo convierto en un botón
		letraActual.button();
		letraActual.click(function(){
			//traigo la letra pulsada
			var miletra = $(this).data("letra").toLowerCase()
			//miro si esa letra está en la palabra
			if(palabraEscogida.indexOf(miletra)!=-1){
				//si está, va para aciertos
				aciertos.push(miletra);
				escribePalabra(palabraEscogida, aciertos);
				//miro si ha ganado
				if(estanTodas(aciertos,palabraEscogida)){
					var caja = $('<div class="dialogletra" title="Has Ganado!!">Felicidades! has adivinado la palabra!!</div>');
					caja.dialog({
					modal: true,
					width: 300,
					buttons: {
						"Ok": function(){
							$(this).dialog("close");
							location.reload();
						}
					}
					});	
				}
			}else{
				//no estaba
				numFallos++;
				dibujaAhorado(numFallos);
				//miro si se ha perdido
				if(numFallos==6){
					var caja = $('<div class="dialogletra" title="Has Perdido!!">Lo lamento!! la palabra era: ' + palabraEscogida + '</div>');
					caja.dialog({
					modal: true,
					width: 300,
					buttons: {
						"Ok": function(){
							$(this).dialog("close");
							location.reload();
							
						}
					}
					});	
				}
			}
			//una vez pulsado el botón, lo desabilito y quito su evento click
			$(this).button("disable");
			$(this).unbind( "click" );
			
		})
		$("#botonesletras").append(letraActual);
	}
	
	//inicio el canvas
	dibujaAhorado(numFallos);
	
	//inicio las palabras
	escribePalabra(palabraEscogida, aciertos);
	
});

/////////////////////////////////
//CANVAS
/////////////////////////////////
function cargaContextoCanvas(idCanvas){
	var elemento = document.getElementById(idCanvas);
	if(elemento && elemento.getContext){
		var contexto = elemento.getContext('2d');
		if(contexto){
			return contexto;
		}
	}
	return false;
}
function borrarCanvas(contexto, anchura, altura){
	contexto.clearRect(0,0,anchura,anchura);
}
function dibujaHorca(ctx){
	var img = new Image(); 
	 img[2]=img.src = '../img/ahorcado/ahorcado.png'; 
	img.onload=function(){
		
		ctx.fillStyle = '#f2d666';
		ctx.drawImage(img,0,0);
		aleat = Math.random() * (img.length)
		aleat = Math.floor(aleat)
	} 
}
function dibujaCabeza(ctx){
	 var img = new Image();
	 img.src = ['../img/cabezas/franco.png']; 
	 img.onload = Math.random() * (img.length)
		img.onload = Math.floor(aleat)
	img.onload=function(){
		
		ctx.fillStyle = '#f2d666';
		ctx.drawImage(img,0,0);
		aleat = Math.random() * (img.length)
		aleat = Math.floor(aleat)
	}  
	
	
	
}
function dibujaCuerpo(ctx){
	var img = new Image(); 
	 img[2]=img.src = '../img/cuerpos/cuerpofranco.png'; 
	img.onload=function(){
		
		ctx.fillStyle = '#f2d666';
		ctx.drawImage(img,0,0);
		aleat = Math.random() * (img.length)
		aleat = Math.floor(aleat)
	}  
	
	
	
}
function dibujaBrazoIzq(ctx){
	var img = new Image(); 
	 img[2]=img.src = '../img/partes/derecho.png'; 
	img.onload=function(){
		
		ctx.fillStyle = '#f2d666';
		ctx.drawImage(img,0,0);
		aleat = Math.random() * (img.length)
		aleat = Math.floor(aleat)
	} 
}
function dibujaBrazoDer(ctx){
	var img = new Image(); 
	 img[2]=img.src = '../img/partes/izquierdo.png'; 
	img.onload=function(){
		
		ctx.fillStyle = '#f2d666';
		ctx.drawImage(img,0,0);
		aleat = Math.random() * (img.length)
		aleat = Math.floor(aleat)
	} 
}
function dibujaPiernaIzq(ctx){
	var img = new Image(); 
	 img[2]=img.src = '../img/partes/Pderecha.png'; 
	img.onload=function(){
		
		ctx.fillStyle = '#f2d666';
		ctx.drawImage(img,0,0);
		aleat = Math.random() * (img.length)
		aleat = Math.floor(aleat)
	} 
}
function dibujaPiernaDer(ctx){
	var img = new Image(); 
	 img[2]=img.src = '../img/partes/Pizquierda.png'; 
	img.onload=function(){
		
		ctx.fillStyle = '#f2d666';
		ctx.drawImage(img,0,0);
		aleat = Math.random() * (img.length)
		aleat = Math.floor(aleat)
	} 
}

        
////////////////////////////////////////////////////////
// GESTION DE FALLOS
////////////////////////////////////////////////////////
var numFallos = 0;
function dibujaAhorado(numerrores){
	var contexto = cargaContextoCanvas('canvasahorcado');
	if(contexto){
		dibujaHorca(contexto);
		if(numFallos>0){
			dibujaCabeza(contexto)
		}
		contexto.fillStyle = '#1f3e18';
		if(numFallos>1){
			dibujaCuerpo(contexto)
		}
		if(numFallos>2){
			dibujaBrazoIzq(contexto)
		}
		if(numFallos>3){
			dibujaBrazoDer(contexto)
		}
		if(numFallos>4){
			dibujaPiernaIzq(contexto)
		}
		if(numFallos>5){
			dibujaPiernaDer(contexto);
			
		}
		
	}
}


</script>



<style type="text/css">
body{
	font-size: 0.7em;
	font-family: Trebuchet MS, verdana, arial, sans-serif;
}
.botonletra{
	font-size: 0.9em;
	margin: 2px;
	width: 30px;
	text-align: center;
}
.dialogletra{
	font-size: 1em;
	text-align: center;
	padding-top: 15px;



}
#botonesletras{
	width: 95%;
	clear: both;
	margin-top: 0%;
	    position: relative;
		margin-left: 5%;
}
#canvasahorcado{
	margin-top:0%;
	margin-left:30%;
	height:40%;
	width:70%;
	position:absolute;
}
#letras{
	font-size: 3em;
	text-align:center;
	width: 30%;
	clear: both;
	margin-top: 50%;
	position:relative;
	margin-left: 10%;
}
#letras span{
	width: 100%;
	text-align:center;
	padding-left: 3%;
	position:relative;
}

</style>



</head>

<body>



<section>
	<div class="backgroung">
		<div class="background1">
			<div class="backgroung2">
				<div class="scroll">            
					
						
							<canvas id="canvasahorcado" height="200">
							 El Ahorcado sólo funciona en navegadores que soporten Canvas. Actualízate a Firefox o Chrome, por poner dos posibilidades.
							</canvas>
						
						<div id="letras"><span>_</span><span>_</span><span>_</span><span>_</span><span>_</span><span>_</span><span>_</span><span>_</span>
						</div>
						<div id="botonesletras">
						</div>
					
				</div>
			</div>
		</div>
	</div>

</section>
   <footer>
    	<img id="alexis" src="../logo/LOGOb.png"></img>
   </footer>
</body>
</html>